<!DOCTYPE html>
<html>
<head>
    <title>Online Store</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body>

<h1>My Tool Store</h1>

<div class="table-responsive">
    <table id="products" class="table align-middle">
        <thead>
        <tr>
            <th>Title</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>Categories</th>
        </tr>
        </thead>
        <tbody id="insertProducts"></tbody>

    </table>
</div>
<button id="refresh">refresh page</button>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-2.2.4.min.js"
        integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

<script>
    $(document).ready(function () {
        "use strict";

        function updateStore() {
            $.get('./json/inventory.json').done((data) => {
                console.log(data);
                let html = '';
                for (let i = 0; i < data.length; i++) {
                    html += `<tr>
                      <td> ${data[i].title} </td>
                      <td> ${data[i].quantity} </td>
                      <td> ${data[i].price} </td>
                      <td> ${data[i].categories}</td>
                    </tr>`
                }
                $("#insertProducts").html(html);
            }).fail((jqXhr, status, error) => {
                console.log('OH NOOOO!!!');
                console.log(status);
                console.log(error);
            });
        }

        //-- Calling the function
        updateStore()
        setInterval(updateStore, 6000);
        $("#refresh").on("click", updateStore)


    })
    // TODO: Create an AJAX GET request for the file under data/inventory.json
    // TODO: Take the data from inventory.json and append it to the products table
    //       HINT: Your data should come back as a JSON object; use console.log() to inspect
    //             its contents and fields
    //       HINT: You will want to target #insertProducts for your new HTML elements
</script>

</body>
</html>